<mujoco model="simple_car_track">
    <compiler angle="radian" coordinate="local" inertiafromgeom="true"/>
    <visual>
        <global offwidth="1920" offheight="1080"/>
    </visual>
    <option timestep="0.005" gravity="0 0 -9.81" density="1.2" viscosity="0.00002"/>
    
    <!-- Contact and solver parameters for stability -->
    <default>
        <geom contype="1" conaffinity="1" condim="3" solref="0.02 1" solimp="0.9 0.95 0.001"/>
        <joint damping="2.0" armature="0.1"/>
    </default>
    
    <worldbody>
        <!-- Ground plane -->
        <geom name="ground" type="plane" size="100 100 1" pos="0 0 0" rgba="1 1 1 1"/>

        <!-- Track Visuals: A gray outer oval with a white inner oval on top -->
        <geom name="track_outer" type="ellipsoid" pos="0 0 0.01" size="64 34 0.01" rgba="0.6 0.6 0.6 1" contype="0" conaffinity="0"/>
        <geom name="track_inner" type="ellipsoid" pos="0 0 0.02" size="56 26 0.01" rgba="1 1 1 1" contype="0" conaffinity="0"/>
        
        <!-- Invisible walls for precise lidar collisions -->
        <geom name="outer_wall" type="ellipsoid" pos="0 0 1.2" size="64 34 0.2" rgba="0 0 0 0" contype="0" conaffinity="0"/>
        <geom name="inner_wall" type="ellipsoid" pos="0 0 1.2" size="56 26 0.2" rgba="0 0 0 0" contype="0" conaffinity="0"/>
        
        <!-- Car body -->
        <body name="car" pos="0 0 0.5">
            <joint name="x_slide" type="slide" axis="1 0 0" damping="3.0" armature="0.2"/>
            <joint name="y_slide" type="slide" axis="0 1 0" damping="3.0" armature="0.2"/>
            <joint name="yaw"     type="hinge" axis="0 0 1" damping="1.5" armature="0.1"/>
            <geom name="car_body" type="box" size="0.6 1.0 0.3" mass="150" friction="0.8 0.1 0.05" rgba="1 0 0 1"/>
            <!-- Lidar Geoms Attached to Car Body -->
            <geom name="lidar_ray_0" type="capsule" fromto="0 0 0.2 1 0 0.2" size="0.05" rgba="0 1 0 0.5" contype="0" conaffinity="0"/>
            <geom name="lidar_ray_1" type="capsule" fromto="0 0 0.2 1 0 0.2" size="0.05" rgba="0 1 0 0.5" contype="0" conaffinity="0"/>
            <geom name="lidar_ray_2" type="capsule" fromto="0 0 0.2 1 0 0.2" size="0.05" rgba="0 1 0 0.5" contype="0" conaffinity="0"/>
            <geom name="lidar_ray_3" type="capsule" fromto="0 0 0.2 1 0 0.2" size="0.05" rgba="0 1 0 0.5" contype="0" conaffinity="0"/>
            <geom name="lidar_ray_4" type="capsule" fromto="0 0 0.2 1 0 0.2" size="0.05" rgba="0 1 0 0.5" contype="0" conaffinity="0"/>
            <site name="lidar_tip_0" type="sphere" pos="0 0 0.2" size="0.1" rgba="0 1 0 1"/>
            <site name="lidar_tip_1" type="sphere" pos="0 0 0.2" size="0.1" rgba="0 1 0 1"/>
            <site name="lidar_tip_2" type="sphere" pos="0 0 0.2" size="0.1" rgba="0 1 0 1"/>
            <site name="lidar_tip_3" type="sphere" pos="0 0 0.2" size="0.1" rgba="0 1 0 1"/>
            <site name="lidar_tip_4" type="sphere" pos="0 0 0.2" size="0.1" rgba="0 1 0 1"/>
        </body>
        
        <!-- Following camera -->
        <camera name="birds_eye" mode="fixed" pos="0 0 60" fovy="90"/>
    </worldbody>
    
    <actuator>
        <!-- No actuators in XML; applied programmatically -->
    </actuator>
</mujoco>
